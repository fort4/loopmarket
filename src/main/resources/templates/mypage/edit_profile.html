<div th:fragment="content" th:object="${users}">
	<div class="container py-4">
		<div class="row justify-content-center">
			<div class="col-12 col-lg-6">
				<div class="card shadow-sm rounded-4 p-4">
					<h2 class="mb-4 text-center">프로필 수정</h2>

					<form th:action="@{/mypage/edit}" method="post" enctype="multipart/form-data">
						<!-- 기본 정보 -->
						<div class="mb-3">
							<label for="nickname" class="form-label">별명 <span class="text-danger">*</span></label>
							<input type="text" id="nickname" th:field="*{nickname}" class="form-control" required />
						</div>

						<div class="mb-3">
							<label for="phoneNumber" class="form-label">전화번호</label>
							<input type="tel" id="phoneNumber" th:field="*{phoneNumber}" pattern="\d{2,3}-\d{3,4}-\d{4}"
								placeholder="010-1234-5678" class="form-control" />
							<small class="form-text text-muted">형식: 010-1234-5678</small>
						</div>

						<div class="mb-3">
							<label for="birthdate" class="form-label">생년월일</label>
							<input type="date" id="birthdate" th:field="*{birthdate}" class="form-control" />
						</div>

						<!-- 프로필 이미지 -->
						<div class="mb-3">
						  <label for="profileImage" class="form-label">프로필 이미지</label>
						  <div class="d-flex align-items-center gap-3 mt-2">
						    <img th:if="${profileImagePath != null and profileImagePath != ''}"
						         th:src="@{${profileImagePath}}"
						         alt="프로필 이미지"
						         class="rounded-circle border"
						         style="width: 80px; height: 80px; object-fit: cover; aspect-ratio: 1 / 1;" />

						    <img th:if="${profileImagePath == null or profileImagePath == ''}"
						         src="/images/default-profile.png"
						         alt="기본 프로필 이미지"
						         class="rounded-circle border"
						         style="width: 80px; height: 80px; object-fit: cover; aspect-ratio: 1 / 1;" />

						    <input type="file" id="profileImage" name="profileImage" accept="image/*"
						           class="form-control" />
						  </div>
						</div>

						<!-- 비밀번호 변경 -->
						<hr class="my-4" />
						<h4 class="mb-3">비밀번호 변경</h4>

						<div th:if="${errorMessage}" class="alert alert-danger py-2 px-3" th:text="${errorMessage}">
						</div>

						<div class="mb-3">
							<label for="currentPassword" class="form-label">현재 비밀번호</label>
							<input type="password" id="currentPassword" name="currentPassword" class="form-control" />
						</div>

						<div class="mb-3">
							<label for="newPassword" class="form-label">새 비밀번호</label>
							<input type="password" id="newPassword" name="newPassword" class="form-control" />
						</div>

						<div class="mb-3">
							<label for="confirmPassword" class="form-label">새 비밀번호 확인</label>
							<input type="password" id="confirmPassword" name="confirmPassword" class="form-control" />
						</div>

						<div class="text-muted mb-4">
							비밀번호를 변경하지 않으려면 빈칸으로 두세요.
						</div>

						<div class="d-flex justify-content-between">
							<a href="/mypage" class="btn btn-outline-secondary">취소</a>
							<button type="submit" class="btn btn-dark">저장</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>

	<script src="/static/js/editprofile.js"></script>
</div>