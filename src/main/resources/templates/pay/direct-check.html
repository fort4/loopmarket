<th:block th:fragment="content">

  <!-- 로그인/상품 정보 JS 전달 -->
  <script th:inline="javascript">
    /*<![CDATA[*/
    window.loginUser = {
      id: /*[[${loginUser.userId}]]*/ 0,
      name: /*[[${loginUser.nickname}]]*/ "",
      email: /*[[${loginUser.email}]]*/ ""
    };

    window.checkoutProduct = {
      productId: /*[[${product.productId}]]*/ 0,
      price: /*[[${product.price}]]*/ 0,
      userId: /*[[${product.userId}]]*/ 0,
      imageUrl: /*[['${product.thumbnailPath}']]*/ ''
    };
    /*]]>*/
  </script>

  <!-- 즉시결제 화면 -->
  <div class="container py-5 text-start">
    <div class="row justify-content-center">
      <div class="col-12 col-sm-10 col-md-6 col-lg-5">
        <h2 class="mb-4">즉시결제</h2>

        <!-- 상품 정보 -->
        <div class="card mb-4">
          <div class="card-body d-flex justify-content-between align-items-center">
            <div>
              <h5 th:text="${product.title}">상품 제목</h5>
              <p class="mb-0 text-muted" th:text="'₩' + ${product.price}"></p>
            </div>
            <img th:src="${product.thumbnailPath}" alt="상품 이미지" width="80">
          </div>
        </div>

        <!-- 총 결제 금액 -->
        <div class="mb-3">
          <label class="form-label fw-bold">총 결제 금액</label>
          <div>
            <span id="totalPriceText" class="text-danger fw-bold">₩0</span>
          </div>
        </div>

        <!-- 페이 잔액 -->
        <div class="mb-3">
          <label class="form-label fw-bold">페이 잔액</label>
          <div>
            <span id="payBalanceText" class="text-muted fw-bold">₩<span th:text="${balance}">0</span></span>
          </div>
        </div>

        <!-- 결제 버튼 -->
        <button type="button" class="btn btn-dark w-100 mb-2" id="directPayBtn">결제하기</button>
        <button type="button" class="btn btn-outline-danger w-100" id="chargeBtn" style="display: none;">충전하기</button>
      </div>
    </div>
  </div>

  <script src="/js/pay/checkout-ui.js"></script>
  <script src="/js/pay/direct-check.js"></script>
</th:block>